<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rilma: La Gran Cosecha</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #87CEEB; overflow: hidden; height: 100vh; font-family: sans-serif; }
        #game-ui { position: absolute; top: 20px; width: 100%; text-align: center; z-index: 10; }
        #score-board { background: rgba(255,255,255,0.8); padding: 10px 20px; border-radius: 20px; font-size: 24px; font-weight: bold; color: #2e7d32; }
        #lives-board { margin-top: 10px; font-size: 20px; color: white; text-shadow: 1px 1px 2px black; }
        #player { position: absolute; bottom: 50px; left: 50%; font-size: 70px; transform: translateX(-50%); touch-action: none; z-index: 5; cursor: grab; }
        .fruit { position: absolute; font-size: 45px; z-index: 4; transition: top 0.02s linear; }
        #ground { position: absolute; bottom: 0; width: 100%; height: 50px; background: #4CAF50; border-top: 4px solid #388E3C; }
    </style>
</head>
<body>

    <div id="game-ui">
        <span id="score-board">PUNTOS: 0</span>
        <div id="lives-board">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    </div>

    <div id="player">üë©‚Äçüåæ</div>
    <div id="ground"></div>

    <script>
        let score = 0;
        let lives = 3;
        const player = document.getElementById('player');
        const scoreBoard = document.getElementById('score-board');
        const livesBoard = document.getElementById('lives-board');
        const fruitIcons = ["üçé", "üçå", "üçì", "üçä", "üçá"];

        function move(e) {
            let x = e.touches ? e.touches[0].clientX : e.clientX;
            player.style.left = x + 'px';
            if(e.touches) e.preventDefault();
        }

        document.addEventListener('touchmove', move, { passive: false });
        document.addEventListener('mousemove', move);

        function spawnFruit() {
            if (lives <= 0) return;

            const fruit = document.createElement('div');
            fruit.className = 'fruit';
            fruit.innerHTML = fruitIcons[Math.floor(Math.random() * fruitIcons.length)];
            fruit.style.left = Math.random() * (window.innerWidth - 50) + 'px';
            fruit.style.top = '-60px';
            document.body.appendChild(fruit);

            let top = -60;
            let fallInterval = setInterval(() => {
                top += 4.5; // Velocidad de ca√≠da fluida
                fruit.style.top = top + 'px';

                let pRect = player.getBoundingClientRect();
                let fRect = fruit.getBoundingClientRect();

                // Colisi√≥n (Atrapar)
                if (fRect.bottom > pRect.top + 20 && fRect.left < pRect.right && fRect.right > pRect.left && fRect.top < pRect.bottom) {
                    score++;
                    scoreBoard.innerText = "PUNTOS: " + score;
                    fruit.remove();
                    clearInterval(fallInterval);
                }

                // Pierde vida si toca el suelo
                if (top > window.innerHeight - 50) {
                    lives--;
                    updateLives();
                    fruit.remove();
                    clearInterval(fallInterval);
                    if (lives <= 0) {
                        alert("¬°GAME OVER! Cosechaste " + score + " frutas.");
                        location.reload();
                    }
                }
            }, 20);
        }

        function updateLives() {
            let hearts = "";
            for(let i=0; i<lives; i++) hearts += "‚ù§Ô∏è";
            livesBoard.innerText = hearts || "üíÄ";
        }

        setInterval(spawnFruit, 1600);
    </script>
</body>
</html>
